"use strict";function addDepthToTree(e,t,l){for(var o in e)e[o]&&"object"==typeof e[o]&&(e[o].depth=t,e[o].collapsed=l,addDepthToTree(e[o],"tree"===o?++t:t,l));return e}function toggleCollapse(e){for(var t in e)e[t]&&"object"==typeof e[t]&&(e[t].collapsed=!e[t].collapsed,toggleCollapse(e[t]));return e}var CONF={baseUrl:"lib/ion-tree-list",digestTtl:35};angular.module("ion-tree-list",[],["$rootScopeProvider",function(e){e.digestTtl(CONF.digestTtl)}]).directive("ionTreeList",[function(){return{restrict:"E",scope:{items:"=",collapsed:"=",templateUrl:"@",showReorder:"="},templateUrl:CONF.baseUrl+"/ion-tree-list.tmpl.html",controller:["$scope",function(e){e.baseUrl=CONF.baseUrl,e.toggleCollapse=function(e){e&&e.collapsible!==!1&&toggleCollapse(e)},e.emitEvent=function(t){e.$emit("$ionTreeList:ItemClicked",t)},e.moveItem=function(t,l,o){e.items.splice(l,1),e.items.splice(o,0,t)},e.$watch("collapsed",function(){e.toggleCollapse(e.items)}),e.$watch("items",function(){e.items=addDepthToTree(e.items,1,e.collapsed),e.$emit("$ionTreeList:LoadComplete",e.items)})}],compile:function(e,t){t.templateUrl=t.templateUrl?t.templateUrl:"item_default_renderer"}}}]);