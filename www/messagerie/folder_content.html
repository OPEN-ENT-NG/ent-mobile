<ion-view ng-controller="InboxCtrl" ng-cloak>
  <ion-nav-title>{{checkable ? getCountOfCheckedMessages():nameFolder}}</ion-nav-title>
  <ion-nav-buttons side="right">
    <button class="button button-icon button-clear ion-trash-a" ng-show=checkable ng-click=deleteSelectedMessages()></button>
    <button class="button button-icon button-clear ion-filing" ng-show=checkable ng-click=showPopupMove()></button>
    <button class="button button-icon button-clear ion-refresh" ng-show=canShowRestore() ng-click="restoreMessages()"></button>
  </ion-nav-buttons>

  <ion-content>
    <ion-refresher pulling-text="Actualiser" on-refresh="doRefreshMessages()">
    </ion-refresher>
    <ion-list>
      <ion-item ng-repeat="extraFolder in extraFolders" href="#/app/messagerie/{{extraFolder.name}}/{{extraFolder.id}}">
          <i class="foldericon-"></i>
          {{writeWithUnreadNumber(extraFolder)}}
      </ion-item>
    </ion-list>

    <div class="item item-divider"></div>


    <ion-list>
      <ion-item ng-repeat="message in messages track by $index" ng-click="doAction($index)" on-long-press="enableCheckMessages($index)">
        <div class="message">
          <input type="checkbox" ng-model="message.checked" ng-checked = "message.checked" ng-show=checkable>
          <div>
            <span class="right">{{message.date | date:'dd/MM/yy'}}</span>
            <h2>{{getRealName(message.from, message)}}</h2>
          </div>
          <i class="attachicon-" ng-show="message.attachments.length != 0"></i>
          <h2>{{message.subject}}</h2>
        </div>
      </ion-item>
    </ion-list>
  </ion-content>
  <div class="float-button" ng-click="newMail()">
    <span class="height-fix">
      <a class="content ">
        <i class="new-01icon-"> </i>
      </a>
    </span>
  </div>
</ion-view>
