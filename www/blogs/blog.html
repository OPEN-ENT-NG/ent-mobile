<ion-view view-title={{nameBlog}}>

  <ion-nav-buttons side="right">
    <button class="button button-icon button-clear fa fa-list" ng-click = "openPopover($event)"></button>
  </ion-nav-buttons>

  <ion-content>
    <ion-refresher pulling-text="Actualiser" on-refresh="doRefreshPosts()">
    </ion-refresher>

    <ion-list>
      <ion-item ng-repeat="post in filteredPosts=(posts | orderBy: 'modified.$date' : true | filter: filterByStatus) track by $index" class="card">
        <div class="item item-avatar item-text-wrap">
          <img ng-src="{{getImageUrl(post.author.photo)}}"/>
          <h2>{{post.title}}</h2>
          <h3>{{translationBlog["blog.by"]}} {{post.author.username}}</h3>
          <p>{{blog.modified.$date ? formatDate(blog.created.$date) : formatDateLocale(blog.modified.$date)}}</p>
        </div>

        <ion-card-content class="item actucard">

          <div class="item-text-wrap" ng-bind-html=renderHtml(post.content)></div>

          <div class="comment"  ng-show="post.comments.length != 0">
            <p  ng-click="toggleComments(post)" ng-class="{active: areCommentsShown(post)}" class="subdued">
              {{getCountComments(post)}}
            </p>
            <ion-item class="item-accordion"  ng-repeat="comment in post.comments track by $index"  ng-show="areCommentsShown(post)">
              <h3 style="font-weight: bold;">{{comment.author.username}}
              {{comment.modified.$date ? formatDate(comment.created.$date) : formatDateLocale(comment.modified.$date)}}</h3>
              <p style="color: black;">{{comment.comment}}</p>
            </ion-item>
          </div>
        </ion-card-content>

      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
